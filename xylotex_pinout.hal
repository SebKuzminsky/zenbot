# pinout config file for 3 channel Xylotex drive
# using a parport for I/O
#
# first load the parport driver
loadrt hal_parport cfg="0x0378"
#
# next connect the parport functions to threads
# read inputs first
addf parport.0.read base-thread 1
# write outputs last
addf parport.0.write base-thread -1
addf parport.0.reset base-thread -1
#
# finally connect physical pins to the signals
linksp Xstep parport.0.pin-02-out
linksp Xdir  parport.0.pin-03-out
linksp Ystep parport.0.pin-04-out
linksp Ydir  parport.0.pin-05-out
linksp Zstep parport.0.pin-06-out
linksp Zdir  parport.0.pin-07-out

# create a signal for the estop loopback
net estop-loop iocontrol.0.user-enable-out iocontrol.0.emc-enable-in

# create signals for tool loading loopback
net tool-prep-loop iocontrol.0.tool-prepare iocontrol.0.tool-prepared
net tool-change-loop iocontrol.0.tool-change iocontrol.0.tool-changed

setp parport.0.pin-02-out-reset 1
setp parport.0.pin-04-out-reset 1
setp parport.0.pin-05-out-invert 1
setp parport.0.pin-06-out-reset 1

setp parport.0.reset-time 2000

setp stepgen.0.stepspace 0
setp stepgen.1.stepspace 0
setp stepgen.2.stepspace 0

setp stepgen.0.maxaccel 40
setp stepgen.1.maxaccel 40
setp stepgen.2.maxaccel 40
